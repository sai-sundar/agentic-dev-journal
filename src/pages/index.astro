---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const allPosts = (await getCollection('journal'))
  .filter((post) => !post.data.draft)
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, 10);
---

<BaseLayout title="Dev Journal - Coding with AI Agents">
  <div class="intro">
    <h1>Dev Journal</h1>
    <p>Musings on coding with AI agents, exploring new applications, and documenting my development journey.</p>
  </div>

  <section>
    <h2>Recent Entries</h2>
    <div class="entry-list">
      {allPosts.map((post) => (
        <article class="entry-card">
          <h2>
            <a href={`/agentic-dev-journal/journal/${post.slug}`}>{post.data.title}</a>
          </h2>
          <div class="entry-meta">
            <time datetime={post.data.date.toISOString()}>
              {post.data.date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}
            </time>
            {post.data.tags.length > 0 && (
              <div class="tags">
                {post.data.tags.map((tag) => (
                  <a href={`/agentic-dev-journal/tags/${tag}`} class="tag">#{tag}</a>
                ))}
              </div>
            )}
          </div>
          <p>{post.data.description}</p>
        </article>
      ))}
    </div>
  </section>
</BaseLayout>

<style>
  .intro {
    margin-bottom: 3rem;
  }

  .intro h1 {
    margin-bottom: 0.5rem;
  }

  .intro p {
    font-size: 1.125rem;
    color: var(--text-muted);
  }

  h2 {
    margin-bottom: 1.5rem;
  }
</style>
